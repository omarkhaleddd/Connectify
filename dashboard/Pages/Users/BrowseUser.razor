@page "/browse-users"
@inject NavigationManager Navigation


<PageTitle>Browse Users</PageTitle>

<h1 class="fw-bold text-secondary">Users</h1>

<div class="text-center w-50 mb-3">
    <SearchBar/>
</div>

<DataTable TItem="User" Items="users">
    <Header>
        @foreach (var head in headers){
            <th class="text-center">@head</th>
        }
    </Header>
    <Row>
        <td>
            <div class="d-flex align-items-center">
                <img src="@context.Image" alt="" style="width: 45px; height: 45px" class="rounded-circle" />
                <div class="ms-3 ">
                    <p class="fw-bold mb-1 ">@context.Name</p>
                </div>
            </div>
        </td>
        <td class="text-center">
            <span class="@(context.Status == "Active" ? "custom-success-badge badge badge-success" : "custom-danger-badge badge badge-primary") rounded-pill d-inline">
                @context.Status
            </span>
        </td>
        <td class="text-center">
            <button class='btn btn-link btn-sm btn-rounded bg-primary text-white text-decoration-none' @onclick='() => NavigateToUserPosts(context.Id)'>View Posts</button>
            <button class='btn btn-link btn-sm btn-rounded bg-danger text-white text-decoration-none' @onclick='() => DeleteUser(context)'>Delete</button>
        </td>
    </Row>
    <Footer>
        <div class=""></div>
    </Footer>
</DataTable>

@code {
    private void NavigateToUserPosts(int id)
    {
        Navigation.NavigateTo($"user-posts/{id}");
    }
    private List<string> headers = new List<string>
    {
        "Name","Status","Actions"
    };

    private List<User> users = new List<User>
    {
        new User { Id = 1 , Name = "John Doe", Status = "Active", Image = "https://mdbootstrap.com/img/new/avatars/8.jpg" },
        new User { Id = 2 , Name = "Alex Ray",Status = "Inactive", Image = "https://mdbootstrap.com/img/new/avatars/6.jpg"},
        new User { Id = 3 , Name = "Kate Hunington",  Status = "Inactive", Image = "https://mdbootstrap.com/img/new/avatars/7.jpg" }
    };

    private void DeleteUser(User user)
    {
        users.Remove(user);
    }

}
